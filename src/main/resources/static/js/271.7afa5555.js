"use strict";(self["webpackChunkhelloworld"]=self["webpackChunkhelloworld"]||[]).push([[271],{65951:function(e,a,r){r.d(a,{N:function(){return o}});var t=r(77736);function o(){return(0,t.Z)({url:"/company/list",method:"get"})}},56684:function(e,a,r){r.d(a,{Z:function(){return p}});var t=r(440);function o(e,a,r,o,l,n){const u=(0,t.up)("el-option"),s=(0,t.up)("el-select");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(s,{modelValue:o.data.provinceObj,"onUpdate:modelValue":a[0]||(a[0]=e=>o.data.provinceObj=e),placeholder:"请选择",onChange:o.provinceChange,"value-key":"name",required:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.data.provinceData,((e,a)=>((0,t.wg)(),(0,t.j4)(u,{key:a,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,t.Uk)("   "),(0,t.Wm)(s,{modelValue:o.data.cityObj,"onUpdate:modelValue":a[1]||(a[1]=e=>o.data.cityObj=e),placeholder:"请选择",onChange:o.cityChange,"value-key":"name",required:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.data.cityData,((e,a)=>((0,t.wg)(),(0,t.j4)(u,{key:a,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,t.Uk)("   "),(0,t.Wm)(s,{modelValue:o.data.countryObj,"onUpdate:modelValue":a[2]||(a[2]=e=>o.data.countryObj=e),placeholder:"请选择",onChange:o.countryChange,"value-key":"name",required:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.data.countryData,((e,a)=>((0,t.wg)(),(0,t.j4)(u,{key:a,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,t.Uk)("   ")])}var l=r(84367),n=r(66530),u=r(72349),s=r(39162),d={setup(){const e=(0,n.oR)(),a=e.state.address,r=(0,l.qj)({provinceObj:{name:""},cityObj:{name:""},countryObj:{name:""},provinceData:a.address,cityData:[],countryData:[]});(0,t.bv)((async()=>{await(0,u.g)().then((e=>{r.provinceData=e.data.address}))}));const o=e=>{r.cityData=e.children,r.countryData=[],r.cityObj={},r.countryObj={}},d=e=>{r.countryData=e.children,r.countryObj={}},i=e=>{s.log(r)};return{data:r,provinceChange:o,cityChange:d,countryChange:i}}},i=r(40465);const m=(0,i.Z)(d,[["render",o]]);var p=m},64271:function(e,a,r){r.r(a),r.d(a,{default:function(){return C}});var t=r(440),o=r(38643);const l={class:"SignContainer"};function n(e,a,r,n,u,s){const d=(0,t.up)("el-input"),i=(0,t.up)("el-form-item"),m=(0,t.up)("el-autocomplete"),p=(0,t.up)("addressSelect"),c=(0,t.up)("el-button"),f=(0,t.up)("el-upload"),h=(0,t.up)("el-form");return(0,t.wg)(),(0,t.iD)("div",l,[(0,t.Wm)(h,{ref:"form",model:u.form,rules:u.signRules,"label-width":"120px",autocomplete:"on"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{label:"用户名",prop:"username"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{ref:"username",placeholder:"用户名",modelValue:u.form.user.username,"onUpdate:modelValue":a[0]||(a[0]=e=>u.form.user.username=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"密码",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{ref:"mdfpassword",type:"password",placeholder:"密码",modelValue:u.form.user.mdfpassword,"onUpdate:modelValue":a[1]||(a[1]=e=>u.form.user.mdfpassword=e),"show-password":""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"再次确认密码",prop:"mdfPassword"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{ref:"password",type:"password",placeholder:"再次确认密码",modelValue:u.form.user.userpassword,"onUpdate:modelValue":a[2]||(a[2]=e=>u.form.user.userpassword=e),"show-password":""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"邮箱",prop:"email"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{ref:"email",placeholder:"**@163.com,***@qq.com",modelValue:u.form.user.email,"onUpdate:modelValue":a[3]||(a[3]=e=>u.form.user.email=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"电话号码",prop:"phone"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{placeholder:"请输入电话号码",modelValue:u.form.user.phone,"onUpdate:modelValue":a[4]||(a[4]=e=>u.form.user.phone=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"公司",prop:"company"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:u.form.company.name,"onUpdate:modelValue":a[5]||(a[5]=e=>u.form.company.name=e),"fetch-suggestions":s.querySearch,placeholder:"输入公司名称",onSelect:s.handleSelect},{default:(0,t.w5)((({item:e})=>[(0,t._)("div",null,(0,o.zw)(e.name),1)])),_:1},8,["modelValue","fetch-suggestions","onSelect"])])),_:1}),(0,t.Wm)(i,{label:"超市名称",prop:"sname"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{placeholder:"超市名称",modelValue:u.form.supermark.sname,"onUpdate:modelValue":a[6]||(a[6]=e=>u.form.supermark.sname=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"超市详细地址",prop:"sdetail"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{placeholder:"超市详细地址",modelValue:u.form.supermark.detail,"onUpdate:modelValue":a[7]||(a[7]=e=>u.form.supermark.detail=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"地区",prop:"saddress"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{ref:"addressSelect"},null,512)])),_:1}),(0,t.Wm)(i,{label:"证件上传",prop:"license"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{ref:"upload",class:"upload-demo",limit:1,"on-change":s.submitUpload,"auto-upload":!1},{trigger:(0,t.w5)((()=>[(0,t.Wm)(c,{type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("select file")])),_:1})])),_:1},8,["on-change"])])),_:1}),(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{type:"primary",onClick:s.onSubmit},{default:(0,t.w5)((()=>[(0,t.Uk)("注册")])),_:1},8,["onClick"]),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"])])}var u=r(56684),s=r(65951),d=r(3618);function i(e,a,r,l,n,u){const s=(0,t.up)("el-pagination");return(0,t.wg)(),(0,t.iD)("div",{class:(0,o.C_)([{hidden:r.hidden},"pagination-container"])},[(0,t.Wm)(s,(0,t.dG)({background:r.background,"current-page":u.currentPage,"onUpdate:currentPage":a[0]||(a[0]=e=>u.currentPage=e),"page-size":u.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>u.pageSize=e),layout:r.layout,"page-sizes":r.pageSizes,total:r.total},e.$attrs,{onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange}),null,16,["background","current-page","page-size","layout","page-sizes","total","onSizeChange","onCurrentChange"])],2)}Math.easeInOutQuad=function(e,a,r,t){return e/=t/2,e<1?r/2*e*e+a:(e--,-r/2*(e*(e-2)-1)+a)};var m=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function p(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function c(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function f(e,a,r){const t=c(),o=e-t,l=20;let n=0;a="undefined"===typeof a?500:a;var u=function(){n+=l;var e=Math.easeInOutQuad(n,t,o,a);p(e),n<a?m(u):r&&"function"===typeof r&&r()};u()}var h={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get(){return this.page},set(e){this.$emit("update:page",e)}},pageSize:{get(){return this.limit},set(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&f(0,800)},handleCurrentChange(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&f(0,800)}}},g=r(40465);const w=(0,g.Z)(h,[["render",i],["__scopeId","data-v-98e71cd6"]]);var y=w,b=r(39162),v={name:"signup",components:{addressSelect:u.Z,Pagination:y},created(){this.getCompanyList()},mounted(){""===this.form.username?this.$refs.username.focus():""===this.form.password?this.$refs.password.focus():""===this.form.mdfPassword?this.$refs.mdfPassword.focus():""==this.form.email&&this.$refs.email.focus()},data(){const e=(e,a,r)=>{""===this.form.user.username.trim()?r(new Error("用户名不能为空")):r()},a=(e,a,r)=>{var t=this.form.user.mdfpassword;""===t.trim()||t.length<6?r(new Error("密码不能为空且不得少于6个字符")):r()},r=(e,a,r)=>{this.form.user.userpassword!=this.form.user.mdfpassword?r(new Error("两次输入的密码不一致")):r()},t=(e,a,r)=>{var t=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;t.test(this.form.user.email)?r():r(new Error("邮箱格式错误"))},o=(e,a,r)=>{""==this.form.user.phone.trim()?r(new Error("电话号码不能为空")):r()},l=(e,a,r)=>{let t=!1;for(let o=0;o<this.companies.length;o++){const e=this.companies[o];if(e.name==this.form.company.name){this.form.company.id=e.id,t=!0;break}}t?r():r(new Error("公司不存在"))},n=(e,a,r)=>{""==this.form.supermark.sname.trim()?r(new Error("超市名称不能为空")):r()},u=(e,a,r)=>{""==this.form.supermark.detail.trim()?r(new Error("电话号码不能为空")):r()},s=(e,a,r)=>{"undefined"==typeof this.$refs.addressSelect.data.cityObj.code?r(new Error("地区不能为空")):r()},d=(e,a,r)=>{0===Object.keys(this.form.supermark.license).length?r(new Error("证件信息不能为空")):r()};return{companies:[],form:{user:{username:"",mdfpassword:"",userpassword:"",email:"",phone:""},company:{id:"",name:""},supermark:{sname:"",detail:"",address:"",license:{}}},signRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:a}],mdfPassword:[{required:!0,trigger:"blur",validator:r}],email:[{required:!0,trigger:"blur",validator:t}],phone:[{required:!0,trigger:"blur",validator:o}],company:[{required:!0,trigger:"blur",validator:l}],sname:[{required:!0,trigger:"blur",validator:n}],saddress:[{required:!0,trigger:"blur",validator:s}],sdetail:[{required:!0,trigger:"blur",validator:u}],license:[{required:!0,trigger:"blur",validator:d}]}}},methods:{submitUpload(e){this.form.supermark.license=e.raw},onSubmit(){this.$refs.form.validate((e=>{if(e){var a=/^([0-9a-zA-Z_\.\-\])+\@([0-9a-zA-Z_\.\-\])+\.([a-zA-Z]+)$/;this.form.user.mdfpassword!=this.form.user.userpassword?d.z8.error("两次输入的密码不同"):a.test(this.form.user.email)?(this.form.supermark.address=this.$refs.addressSelect.data.cityObj.code,b.info(this.$refs.upload),this.$store.dispatch("user/signUp",this.form).then().catch((e=>{b.info(e)}))):d.z8.error("邮箱格式错误，请重新输入")}}))},handleExceed(){},async getCompanyList(){let e={};await(0,s.N)().then((a=>{e=a.data})).catch(),this.companies=e},querySearch(e){const a=JSON.parse(JSON.stringify(this.companies)),r=e?a.filter(this.createFilter(e)):a;return r},createFilter(e){return a=>0===a.name.toLowerCase().indexOf(e.toLowerCase())},handleSelect(e){this.form.company=e}}};const k=(0,g.Z)(v,[["render",n],["__scopeId","data-v-726163e5"]]);var C=k}}]);
//# sourceMappingURL=271.7afa5555.js.map